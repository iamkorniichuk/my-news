{% extends "base.html" %}
{% from 'macros.html' import render_form, render_profile_picture, render_divider, render_author, render_carousel, render_content_dropdown %}
{% block script %}
    <script src="{{ url_for('static', filename='mark_read.js') }}"></script>
{% endblock script %}
{% block content %}
<div class="container px-5 py-2">
{{ render_author(news.user_login, news.image, news.user_login) }}
    <h1 class="d-flex justify-content-between mb-3">
        {{ news.title }}
        {% if is_its_account(news.user_login) %}
            {{ render_content_dropdown(url_for('news.edit', id=news.id), url_for('news.delete', id=news.id)) }}
        {% endif %}
    </h1>
    <div class="row">
        <div class="col">
            <!-- TODO: To end carousel -->
            <div class="float-start w-50 me-3 mb-3 ratio ratio-4x3">
                {% if news.images %}
                    {{ render_carousel(news.images) }}
                {% else %}
                    <img class="w-100" src="{{ news.cover }}" alt="Cover">
                {% endif %}
            </div>
            <p>
                {{ news.body }}
                <br>
                <small class="text-muted">{{ news.posted_time }}</small>
            </p>
         </div>
    </div>
    {{ render_divider() }}
    {% if is_logged() %}
        {{ render_form(form) }}
    {% endif %}
    <script>
        loadSection('{{ url_for("news.comments", id=news.id) }}', 'comments')
    </script>
    <div id="comments" class="my-3">
    </div>
</div>
{% endblock content %}